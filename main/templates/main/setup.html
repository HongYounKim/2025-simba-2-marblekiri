{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>게임 설정</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body class="setup-page">
  <form id="gameForm" method="POST" action="{% url 'game_start' %}">
    {% csrf_token %}

    <div class="theme-select">
      <label>테마 선택</label>
      <select name="theme" id="themeSelect">
        <option value="college">대학생</option>
        <option value="sports">스포츠</option>
        <option value="idol">아이돌</option>
        <option value="custom">사용자 정의</option>
      </select>
    </div>
    
    <div class="player-select">
      <h2>인원 설정</h2>
      <ol id="player-list">
        <input type="text" name="players[]" placeholder="이름" required>
        <button type="button" onclick="removePlayer(this)">-</button>
      </ol>
      <button type="button" onclick="addPlayer()">+ 인원 추가</button>
    </div>

    <div class="game-options">
      <h2>게임 설정</h2>
      <label>게임 중 랭킹 보기 <input type="checkbox" checked></label>
      <div>
        <label>턴 수 설정</label><br>
        <input type="radio" name="turn" value="unlimited" checked> 무제한<br>
        <input type="radio" name="turn" value="limited"> 진행 턴 수 지정 (ex: 10)
      </div>
    </div>

    <button type="submit" class="game-start-btn">GAME START</button>
  </form>

  <script>
    document.getElementById("gameForm").addEventListener("submit", function(event) {
      const theme = document.getElementById("themeSelect").value;
      if (theme === "custom") {
        event.preventDefault();
        window.location.href = "/custom_questions/"; // URL은 Django URLconf와 맞춰줘!
      }
    });

    function addPlayer() {
      const list = document.getElementById("player-list");
      const div = document.createElement("div");
      div.innerHTML = `<input type="text" name="players[]" placeholder="이름" required>
                       <button type="button" onclick="removePlayer(this)">-</button>`;
      list.appendChild(div);
    }

    function removePlayer(btn) {
      btn.parentElement.remove();
    }
  </script>
</body>
</html>
